import { getPlayerCount } from 'noblox.js';

// Replace with your Roblox game ID
const GAME_ID = '18933834133';

// Initialize your Noblox.js with a cookie or authentication token if required.
const ROBLOX_COOKIE = '_|WARNING:-DO-NOT-SHARE-THIS.--Sharing-this-will-allow-someone-to-log-in-as-you-and-to-steal-your-ROBUX-and-items.|_CCC2B6A7A9CAA03627B5E03D59FDA56BD329F910EEE81B7DB5E29F671F3575360625950B6BF9A7BC0076A3509BD370A4F5326AF3B8D77D80F4559EBDF770C8BA4BC239CDE399B76C65EDCF280B0064B4261AB59C221C9428553FEFB4260192B1FFC85DEFC6A0602F0E7CDE54438D95F18B341A9FF6E101D5EC5B4088A0CFA97A78FFDCEC9317FD23AA6DCC3EE2A95B4C435BF436585BFD92EC8BB9E2BE5FFB6CA85DB20A53398884886E509E2E8F2AA9A1CB2E07B49F32C83B8735A8C7DAB1533A3839B8A7DB8CC9D1A0D99E75351DDC407FFC0CCB09B34409AC54E5296F23CCB985FC9E0B5BF5F2A8ED70ED983B0B545B22ECE2554A38D1C4CE661D3AA8A7A55D0C1E232269747284EE8CA4984B783728EB82D3276FBBC00DE9FB4E3DF41408593DF786CF5EBEB474BEC4FF9740052EC36732DED6D45B2F00A7ED890A27BE7C919A73F4B247B7E49A56346D82110A27AA639824335EA6F7020DBF6E4EDB09910782374BD3BC49A999E8B6CB06C91A2F434979664D40BCE1FDE2F614F1CD8618808A4FF37060C3FA836464C8085AB73FD1BD472F57C2F43E5469C8DF955C1C832685C0EC373BB5D6048DAF831D33B426289107C4F9A7186C92B176CB1D48EA32776F191FB15CDCFA12105018C887ABDDC5DEA3F460E43D4ADAAAD9B76AC4F54ADEA62EA4F029593B66E3B57C29091E6008A415AD062565A56428BF9B2A2A38C5E37DAF046AE584B58D46A21F61F7FE63AB125563B8922F577563BC04728EB94639B61636C3F89CA0313CE8E481BA9F4E52A2F5D40DFBEF8E2C798A1E35EA787F3D238DAE98398EC6EB3CD33AB63F2A5C0DD2A1E8712B053C3E139F8BC6ECF6F5FEC222D7D24CFB58AB9B643A62683C3D2E1B18AB540B8F27E0060872A2299B5D858E331EA0B67FB9699A1F3514476B16C5DE5C12B1603F04BD83B0EE52DC67AA452248D6935B2716EF6F5129BCBC7EA900B90B49AD75C3884BA415169C8A28080A619B3E51241DCF5C88F5FAAAB4CE78D7EDBDDA6ABC53DA6C09618BC8C50F21B1E20248'; // Replace with your Roblox cookie

export default async function handler(req, res) {
    try {
        // Initialize noblox.js with your cookie
        await getPlayerCount({ gameId: GAME_ID, cookie: ROBLOX_COOKIE })
            .then((playerCount) => {
                res.status(200).json({ playerCount });
            })
            .catch((error) => {
                res.status(500).json({ error: 'Failed to fetch player count' });
            });
    } catch (error) {
        res.status(500).json({ error: 'Failed to fetch player count' });
    }
}
